<ion-content [fullscreen]="true">
  <div class="relative flex min-h-screen w-full flex-col max-w-[430px] mx-auto bg-background overflow-x-hidden pb-32">
    
    <!-- Header -->
    <header class="px-6 pt-4 pb-2">
      <div class="flex items-center justify-between mb-6">
        <!-- Location -->
        <div class="flex flex-col">
          <p class="text-[10px] text-muted font-bold uppercase tracking-widest">Deliver to</p>
          <div class="flex items-center gap-1.5">
            <svg class="w-5 h-5 text-primary fill-current" viewBox="0 0 24 24">
              <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5z"/>
            </svg>
            <h2 class="text-white text-sm font-bold truncate max-w-[150px]">Home, 123 Maple Ave</h2>
            <svg class="w-4 h-4 text-muted fill-current" viewBox="0 0 24 24">
              <path d="M7 10l5 5 5-5z"/>
            </svg>
          </div>
        </div>

        <!-- Icons -->
        <div class="flex items-center gap-3">
          <button 
            (click)="onNotifications()"
            class="relative w-10 h-10 rounded-full bg-surface flex items-center justify-center border border-white/5"
          >
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/>
            </svg>
            <span class="absolute top-2.5 right-2.5 w-2 h-2 bg-primary rounded-full ring-2 ring-background"></span>
          </button>

          <div class="w-10 h-10 rounded-full overflow-hidden border border-white/10">
            <img 
              [src]="restaurant.avatar" 
              alt="Profile" 
              class="w-full h-full object-cover"
            />
          </div>
        </div>
      </div>

      <!-- Restaurant Info -->
      <div class="mb-6">
        <div class="flex justify-between items-start mb-2">
          <h1 class="text-3xl font-extrabold tracking-tight">{{ restaurant.name }}</h1>
          <button 
            (click)="onViewMenu()"
            class="bg-primary text-white text-[11px] font-extrabold px-4 py-2 rounded-xl uppercase tracking-wider shadow-lg shadow-primary/20 active:scale-95 transition-transform"
          >
            View Menu
          </button>
        </div>

        <div class="flex items-center gap-4 text-muted font-semibold text-sm">
          <div class="flex items-center gap-1 bg-primary/10 px-2 py-1 rounded-lg">
            <svg class="w-4 h-4 text-primary fill-current" viewBox="0 0 24 24">
              <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
            </svg>
            <span class="text-primary">{{ restaurant.rating }}</span>
            <span class="text-primary/60 text-xs ml-0.5">({{ (restaurant.reviewCount / 1000).toFixed(1) }}k+)</span>
          </div>

          <div class="flex items-center gap-1">
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
              <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>
            </svg>
            <span>{{ restaurant.deliveryTime }}</span>
          </div>

          <div class="flex items-center gap-1">
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
              <path d="M19 15l-6 6-1.42-1.42L15.17 16H4V4h2v10h9.17l-3.59-3.58L13 9l6 6z"/>
            </svg>
            <span>{{ restaurant.deliveryFee }}</span>
          </div>
        </div>
      </div>

      <!-- Search Bar -->
      <div class="relative mb-6">
        <svg class="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted" fill="currentColor" viewBox="0 0 24 24">
          <path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
        </svg>
        <input 
          [(ngModel)]="searchQuery"
          type="text"
          placeholder="Search dishes, ingredients..."
          class="w-full bg-surface border-none rounded-2xl py-4 pl-12 pr-4 text-sm font-medium focus:ring-1 focus:ring-primary/50 placeholder:text-muted"
        />
      </div>

      <!-- Categories -->
      <div class="flex gap-4 overflow-x-auto hide-scrollbar -mx-6 px-6 mb-2">
        <button 
          *ngFor="let category of categories"
          (click)="onCategoryClick(category)"
          class="flex flex-col items-center gap-2 flex-shrink-0 min-w-[72px]"
        >
          <div 
            class="w-16 h-16 rounded-full flex items-center justify-center shadow-lg transition-all"
            [class.bg-primary]="category.active"
            [class.shadow-primary/20]="category.active"
            [class.bg-surface]="!category.active"
            [class.border]="!category.active"
            [class.border-white/5]="!category.active"
          >
            <svg 
              class="w-7 h-7"
              [class.text-white]="category.active"
              [class.text-muted]="!category.active"
              fill="currentColor" 
              viewBox="0 0 24 24"
            >
              <use [attr.xlink:href]="'#' + category.icon"></use>
            </svg>
          </div>
          <span 
            class="text-[11px] font-bold"
            [class.text-primary]="category.active"
            [class.text-muted]="!category.active"
          >
            {{ category.name }}
          </span>
        </button>
      </div>
    </header>

    <!-- Dishes List -->
    <main class="px-6 flex flex-col gap-6 mt-4">
      <app-dish-card
        *ngFor="let dish of dishes"
        [dish]="dish"
        (addToCart)="onAddToCart($event)"
        (toggleFavorite)="onToggleFavorite($event)"
      ></app-dish-card>
    </main>

    <!-- Bottom Navigation -->
    <nav class="fixed bottom-0 left-0 right-0 max-w-[430px] mx-auto bg-surface/90 backdrop-blur-xl border-t border-white/5 px-8 pt-3 pb-8 z-50">
      <div class="flex items-center justify-between">
        <button class="flex flex-col items-center gap-1 text-primary">
          <svg class="w-6 h-6 fill-current" viewBox="0 0 24 24">
            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
          </svg>
          <span class="text-[10px] font-bold">Menu</span>
        </button>

        <button class="flex flex-col items-center gap-1 text-muted">
          <svg class="w-6 h-6 fill-current" viewBox="0 0 24 24">
            <path d="M13 3a9 9 0 0 0-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42A8.954 8.954 0 0 0 13 21a9 9 0 0 0 0-18zm-1 5v5l4.25 2.52.77-1.28-3.52-2.09V8z"/>
          </svg>
          <span class="text-[10px] font-bold">History</span>
        </button>

        <div class="flex flex-col items-center gap-1 text-muted relative">
          <div class="w-14 h-14 bg-primary rounded-full absolute -top-11 flex items-center justify-center shadow-2xl shadow-primary/40 border-[6px] border-background">
            <svg class="w-7 h-7 text-white fill-current" viewBox="0 0 24 24">
              <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49A1.003 1.003 0 0 0 20 4H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/>
            </svg>
            <div class="absolute -top-1 -right-1 w-5 h-5 bg-white text-primary text-[10px] font-extrabold rounded-full flex items-center justify-center border-2 border-primary">
              {{ basketCount }}
            </div>
          </div>
          <span class="text-[10px] font-bold pt-6">Basket</span>
        </div>

        <button class="flex flex-col items-center gap-1 text-muted">
          <svg class="w-6 h-6 fill-current" viewBox="0 0 24 24">
            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
          </svg>
          <span class="text-[10px] font-bold">Saved</span>
        </button>

        <button class="flex flex-col items-center gap-1 text-muted">
          <svg class="w-6 h-6 fill-current" viewBox="0 0 24 24">
            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
          </svg>
          <span class="text-[10px] font-bold">Account</span>
        </button>
      </div>

      <!-- Home Indicator -->
      <div class="absolute bottom-2 left-1/2 -translate-x-1/2 w-32 h-1.5 bg-white/10 rounded-full"></div>
    </nav>
  </div>
</ion-content>

<!-- SVG Icons -->
<svg style="display: none;">
  <symbol id="set_meal" viewBox="0 0 24 24">
    <path d="M21 15V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM5 5h14v10H5V5z"/>
    <path d="M2 19h20v2H2z"/>
  </symbol>
  <symbol id="ramen_dining" viewBox="0 0 24 24">
    <path d="M22 3H2L1 5v2h1.5V3h2.25v4H6.5V3h2.25v4H10.5V3h2.25v4H14.5V3h2.25v4H18.5V3h2.25v4H23V5l-1-2z"/>
    <path d="M2 17c0 2.76 2.24 5 5 5h10c2.76 0 5-2.24 5-5v-7H2v7zm3-5h1v3.5h2V12h8v3.5h2V12h1v5c0 1.66-1.34 3-3 3H8c-1.66 0-3-1.34-3-3v-5z"/>
  </symbol>
  <symbol id="local_pizza" viewBox="0 0 24 24">
    <path d="M12 2C8.43 2 5.23 3.54 3.01 6L12 22l8.99-16C18.78 3.54 15.57 2 12 2zM7 7c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm5 8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"/>
  </symbol>
  <symbol id="lunch_dining" viewBox="0 0 24 24">
    <path d="M22 10c.32-3.28-4.28-6-9.99-6S1.7 6.72 2.02 10H22z"/>
    <path d="M5.35 13.5c.55 0 .78.14 1.15.36.45.27 1.07.64 2.18.64s1.73-.37 2.18-.64c.37-.23.59-.36 1.15-.36.55 0 .78.14 1.15.36.45.27 1.07.64 2.18.64s1.73-.37 2.18-.64c.37-.23.59-.36 1.15-.36.55 0 .78.14 1.15.36.45.27 1.07.64 2.18.64v-2c-.55 0-.78-.14-1.15-.36-.45-.27-1.07-.64-2.18-.64s-1.73.37-2.18.64c-.37.23-.59.36-1.15.36-.55 0-.78-.14-1.15-.36-.45-.27-1.07-.64-2.18-.64s-1.73.37-2.18.64c-.37.23-.59.36-1.15.36-.55 0-.78-.14-1.15-.36-.45-.27-1.07-.64-2.18-.64s-1.73.37-2.18.64c-.37.23-.59.36-1.15.36v2c1.11 0 1.73-.37 2.18-.64.37-.22.6-.36 1.15-.36z"/>
    <path d="M2 16v2c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2v-2H2z"/>
  </symbol>
  <symbol id="bakery_dining" viewBox="0 0 24 24">
    <path d="M18.73 8.44l-1.48-3.01c-.38-.74-1.28-1.02-2.03-.63l-1.38.73c-.73.38-1.03 1.28-.66 2.03l1.48 3.01c.38.73 1.28 1.02 2.03.63l1.38-.73c.73-.38 1.03-1.28.66-2.03zM7.63 5.79L6.24 5.06c-.75-.39-1.65-.11-2.03.63L2.73 8.7c-.37.75-.07 1.65.66 2.03l1.38.73c.75.39 1.65.11 2.03-.63l1.48-3.01c.37-.75.07-1.65-.65-2.03z"/>
    <path d="M8.5 10h-3c-.83 0-1.5.67-1.5 1.5v6c0 .83.67 1.5 1.5 1.5h3c.83 0 1.5-.67 1.5-1.5v-6c0-.83-.67-1.5-1.5-1.5zm10 0h-3c-.83 0-1.5.67-1.5 1.5v6c0 .83.67 1.5 1.5 1.5h3c.83 0 1.5-.67 1.5-1.5v-6c0-.83-.67-1.5-1.5-1.5z"/>
    <path d="M12 2c-.83 0-1.5.67-1.5 1.5v15c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5v-15c0-.83-.67-1.5-1.5-1.5z"/>
  </symbol>
</svg>
