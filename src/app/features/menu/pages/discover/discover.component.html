<ion-content [fullscreen]="true">
  <div class="relative flex min-h-screen w-full flex-col max-w-[430px] mx-auto bg-background overflow-x-hidden pb-32">
    
    <!-- Header -->
    <header class="px-6 pt-4 pb-2">
      <div class="flex items-center justify-between mb-6">
        <!-- Location -->
        <div class="flex flex-col">
          <p class="text-[10px] text-muted font-bold uppercase tracking-widest">Deliver to</p>
          <div class="flex items-center gap-1.5">
            <i class="fa-solid fa-location-dot w-5 h-5 text-primary text-sm flex items-center justify-center"></i>
            <h2 class="text-white text-sm font-bold truncate max-w-[150px]">Home, 123 Maple Ave</h2>
            <i class="fa-solid fa-chevron-down w-4 h-4 text-muted text-xs flex items-center justify-center"></i>
          </div>
        </div>

        <!-- Icons -->
        <div class="flex items-center gap-3">
          <button 
            (click)="onNotifications()"
            class="relative w-10 h-10 rounded-full bg-surface flex items-center justify-center border border-white/5"
          >
            <i class="fa-solid fa-bell w-5 h-5 text-base flex items-center justify-center"></i>
            <span class="absolute top-2.5 right-2.5 w-2 h-2 bg-primary rounded-full ring-2 ring-background"></span>
          </button>

          <div class="w-10 h-10 rounded-full overflow-hidden border border-white/10">
            <img 
              [src]="restaurant.avatar" 
              alt="Profile" 
              class="w-full h-full object-cover"
            />
          </div>
        </div>
      </div>

      <!-- Restaurant Info -->
      <div class="mb-6">
        <div class="flex justify-between items-start mb-2">
          <h1 class="text-3xl font-extrabold tracking-tight">{{ restaurant.name }}</h1>
          <button 
            (click)="onViewMenu()"
            class="bg-primary text-white text-[11px] font-extrabold px-4 py-2 rounded-xl uppercase tracking-wider shadow-lg shadow-primary/20 active:scale-95 transition-transform"
          >
            View Menu
          </button>
        </div>

        <div class="flex items-center gap-4 text-muted font-semibold text-sm">
          <div class="flex items-center gap-1 bg-primary/10 px-2 py-1 rounded-lg">
            <i class="fa-solid fa-star w-4 h-4 text-primary text-xs flex items-center justify-center"></i>
            <span class="text-primary">{{ restaurant.rating }}</span>
            <span class="text-primary/60 text-xs ml-0.5">({{ (restaurant.reviewCount / 1000).toFixed(1) }}k+)</span>
          </div>

          <div class="flex items-center gap-1">
            <i class="fa-regular fa-clock w-4 h-4 text-xs flex items-center justify-center"></i>
            <span>{{ restaurant.deliveryTime }}</span>
          </div>

          <div class="flex items-center gap-1">
            <i class="fa-solid fa-truck-fast w-4 h-4 text-xs flex items-center justify-center"></i>
            <span>{{ restaurant.deliveryFee }}</span>
          </div>
        </div>
      </div>

      <!-- Search Bar -->
      <div class="relative mb-6">
        <i class="fa-solid fa-magnifying-glass absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted text-sm flex items-center justify-center"></i>
        <input 
          [(ngModel)]="searchQuery"
          type="text"
          placeholder="Search dishes, ingredients..."
          class="w-full bg-surface border-none rounded-2xl py-4 pl-12 pr-4 text-sm font-medium focus:ring-1 focus:ring-primary/50 placeholder:text-muted"
        />
      </div>

      <!-- Categories -->
      <div class="flex gap-4 overflow-x-auto hide-scrollbar -mx-6 px-6 mb-2">
        <button 
          *ngFor="let category of categories"
          (click)="onCategoryClick(category)"
          class="flex flex-col items-center gap-2 flex-shrink-0 min-w-[72px]"
        >
          <div 
            class="w-16 h-16 rounded-full flex items-center justify-center shadow-lg transition-all"
            [class.bg-primary]="category.active"
            [class.shadow-primary/20]="category.active"
            [class.bg-surface]="!category.active"
            [class.border]="!category.active"
            [class.border-white/5]="!category.active"
          >
            <i
              class="fa-solid w-7 h-7 text-xl flex items-center justify-center"
              [ngClass]="getCategoryIconClass(category.icon)"
              [class.text-white]="category.active"
              [class.text-muted]="!category.active"
            ></i>
          </div>
          <span 
            class="text-[11px] font-bold"
            [class.text-primary]="category.active"
            [class.text-muted]="!category.active"
          >
            {{ category.name }}
          </span>
        </button>
      </div>
    </header>

    <!-- Dishes List -->
    <main class="px-6 flex flex-col gap-6 mt-4">
      <app-dish-card
        *ngFor="let dish of dishes"
        [dish]="dish"
        (addToCart)="onAddToCart($event)"
        (toggleFavorite)="onToggleFavorite($event)"
      ></app-dish-card>
    </main>

    <!-- Bottom Navigation -->
    <nav class="fixed bottom-0 left-0 right-0 max-w-[430px] mx-auto bg-surface/90 backdrop-blur-xl border-t border-white/5 px-8 pt-3 pb-8 z-50">
      <div class="flex items-center justify-between">
        <button class="flex flex-col items-center gap-1 text-primary">
          <i class="fa-solid fa-utensils w-6 h-6 text-lg flex items-center justify-center"></i>
          <span class="text-[10px] font-bold">Menu</span>
        </button>

        <button class="flex flex-col items-center gap-1 text-muted">
          <i class="fa-solid fa-clock-rotate-left w-6 h-6 text-lg flex items-center justify-center"></i>
          <span class="text-[10px] font-bold">History</span>
        </button>

        <div class="flex flex-col items-center gap-1 text-muted relative">
          <div class="w-14 h-14 bg-primary rounded-full absolute -top-11 flex items-center justify-center shadow-2xl shadow-primary/40 border-[6px] border-background">
            <i class="fa-solid fa-cart-shopping w-7 h-7 text-white text-xl flex items-center justify-center"></i>
            <div class="absolute -top-1 -right-1 w-5 h-5 bg-white text-primary text-[10px] font-extrabold rounded-full flex items-center justify-center border-2 border-primary">
              {{ basketCount }}
            </div>
          </div>
          <span class="text-[10px] font-bold pt-6">Basket</span>
        </div>

        <button class="flex flex-col items-center gap-1 text-muted">
          <i class="fa-solid fa-heart w-6 h-6 text-lg flex items-center justify-center"></i>
          <span class="text-[10px] font-bold">Saved</span>
        </button>

        <button class="flex flex-col items-center gap-1 text-muted">
          <i class="fa-solid fa-user w-6 h-6 text-lg flex items-center justify-center"></i>
          <span class="text-[10px] font-bold">Account</span>
        </button>
      </div>

      <!-- Home Indicator -->
      <div class="absolute bottom-2 left-1/2 -translate-x-1/2 w-32 h-1.5 bg-white/10 rounded-full"></div>
    </nav>
  </div>
</ion-content>
